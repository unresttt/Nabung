<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aplikasi Tabungan</title>

  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icon-192.png" sizes="192x192" />
  <link rel="stylesheet" href="style.css" />
  <!-- Firebase SDK (modular) via CDN -->
  <script type="module">
    // initialize firebase used by app.js (app.js will import firebase modules)
  </script>
</head>
<body>
  <main id="app">
    <header class="app-header">
      <div class="logo">ğŸ’°</div>
      <h1>Aplikasi Tabungan</h1>
    </header>

    <!-- Tabs container (full-screen tab style) -->
    <section id="tabs" class="tabs">
      <div class="tab" id="tab-targets">
        <h2>ğŸ¯ Daftar Target Tabungan</h2>
        <button id="btn-add-target" class="btn green">+ Tambah Target</button>
        <div id="targets-list" class="card-list">
          <!-- target cards injected here -->
        </div>
      </div>

      <div class="tab" id="tab-meet">
        <h2>ğŸ¤ Tabungan Tiap Ketemu & âš ï¸ Denda</h2>
        <div class="card">
          <h3>Tabungan Tiap Ketemu</h3>
          <p class="amount" id="meet-amount">Rp 0</p>
          <div class="controls">
            <button id="meet-add" class="btn blue">Tabung +</button>
            <button id="meet-reset" class="btn red">Reset</button>
          </div>
        </div>

        <div class="divider"></div>

        <div class="card">
          <h3>Denda</h3>
          <p class="amount" id="penalty-amount">Rp 0</p>
          <div class="controls">
            <button id="penalty-add" class="btn blue">Tabung +</button>
            <button id="penalty-reset" class="btn red">Reset</button>
          </div>
        </div>
      </div>

      <div class="tab" id="tab-total">
        <h2>ğŸ’µ Total Keseluruhan</h2>
        <div class="big-card">
          <p class="big-amount" id="total-amount">Rp 0</p>
          <p class="muted">Total gabungan semua tabungan, target, dan denda</p>
        </div>
      </div>

      <div class="tab" id="tab-history">
        <h2>ğŸ“œ Riwayat Transaksi</h2>
        <ul id="transactions-list" class="tx-list">
          <!-- transaksi inject -->
        </ul>
        <button id="clear-history" class="btn red">Hapus Riwayat</button>
      </div>
    </section>

    <!-- pagination dots -->
    <nav id="dots" class="dots"></nav>

    <!-- add/edit target modal (simple) -->
    <div id="modal" class="modal hidden">
      <div class="modal-card">
        <h3 id="modal-title">Tambah Target</h3>
        <input id="target-name" placeholder="Nama target (contoh: Beli Helm)" />
        <input id="target-amount" placeholder="Target (angka, tanpa . atau Rp)" inputmode="numeric"/>
        <div class="modal-actions">
          <button id="modal-cancel" class="btn muted">Batal</button>
          <button id="modal-save" class="btn green">Simpan</button>
        </div>
      </div>
    </div>

    <button id="toggle-theme" class="fab">ğŸŒ™</button>
  </main>

  <script nomodule src="app-legacy.js"></script>
  <script>
    // register service worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js').catch(e => console.warn('SW reg fail', e));
    }
  </script>
</body>
</html>
